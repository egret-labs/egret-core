var egret;!function(e){var t;!function(t){var n={"source-over":[1,771],lighter:[770,1],"destination-out":[0,771],"destination-in":[0,770]},i=function(i){function r(){i.apply(this,arguments),this.$matrix=new e.Matrix,this.$nativeContext=egret_native.Canvas?null:egret_native.Graphics,this.$nativeGraphicsContext=egret_native.Canvas?null:egret_native.rastergl,this.$globalCompositeOperation="source-over",this.$globalAlpha=1,this.$lineWidth=0,this.$strokeStyle="#000000",this.$fillStyle="#000000",this.$font="10px sans-serif",this.$fontSize=10,this.clipRectArray=null,this.$saveList=[],this.$clipRectArray=[],this.$clipRect=new e.Rectangle,this.$saveCount=0,this.$clipList=[],this.$hasStrokeText=!1}__extends(r,i);var a=__define,s=r,o=s.prototype;return a(o,"globalCompositeOperation",function(){return this.$globalCompositeOperation},function(e){this.$globalCompositeOperation=e;var t=n[e];t&&(egret_native.Canvas||this.checkSurface(),this.$nativeContext.setBlendArg(t[0],t[1]))}),a(o,"globalAlpha",function(){return this.$globalAlpha},function(e){this.$globalAlpha=e,egret_native.Canvas||this.checkSurface(),this.$nativeContext.setGlobalAlpha(e)}),a(o,"lineWidth",function(){return this.$lineWidth},function(e){this.$lineWidth=e,this.$nativeContext.lineWidth=e,egret_native.Canvas?this.$nativeContext.lineWidth=e:(this.checkSurface(),this.$nativeGraphicsContext.lineWidth=e)}),a(o,"strokeStyle",function(){return this.$strokeStyle},function(e){this.$strokeStyle=e,null!=e&&(-1!=e.indexOf("rgba")?e=this.$parseRGBA(e):-1!=e.indexOf("rgb")&&(e=this.$parseRGB(e)),egret_native.Label.setStrokeColor(parseInt(e.replace("#","0x")))),egret_native.Canvas?this.$nativeContext.strokeStyle=e:(this.checkSurface(),this.$nativeGraphicsContext.strokeStyle=e)}),a(o,"fillStyle",function(){return this.$fillStyle},function(e){this.$fillStyle=e,null!=e&&(-1!=e.indexOf("rgba")?e=this.$parseRGBA(e):-1!=e.indexOf("rgb")&&(e=this.$parseRGB(e)),egret_native.Label.setTextColor(parseInt(e.replace("#","0x")))),egret_native.Canvas?this.$nativeContext.fillStyle=e:(this.checkSurface(),this.$nativeGraphicsContext.fillStyle=e)}),o.$fillColorStr=function(e){return e.length<2&&(e="0"+e),e},o.$parseRGBA=function(e){var t=e.indexOf("(");e=e.slice(t+1,e.length-1);var n=e.split(","),i=parseInt(255*parseFloat(n[3])).toString(16),r=parseInt(n[0]).toString(16),a=parseInt(n[1]).toString(16),s=parseInt(n[2]).toString(16);return e="#"+this.$fillColorStr(i)+this.$fillColorStr(r)+this.$fillColorStr(a)+this.$fillColorStr(s)},o.$parseRGB=function(e){var t=e.indexOf("(");e=e.slice(t+1,e.length-1);var n=e.split(","),i=parseInt(n[0]).toString(16),r=parseInt(n[1]).toString(16),a=parseInt(n[2]).toString(16);return e="#"+this.$fillColorStr(i)+this.$fillColorStr(r)+this.$fillColorStr(a)},a(o,"font",function(){return this.$font},function(e){this.$font=e;for(var t=e.split(" "),n=t.length,i=0;n>i;i++){var r=t[i];if(-1!=r.indexOf("px"))return void(this.$fontSize=parseInt(r.replace("px","")))}}),o.arc=function(e,t,n,i,r,a){egret_native.Canvas?this.$nativeContext.arc(e,t,n,i,r,a):(this.checkSurface(),this.$nativeGraphicsContext.arc(e,t,n,i,r,a))},o.quadraticCurveTo=function(e,t,n,i){egret_native.Canvas?this.$nativeContext.quadraticCurveTo(e,t,n,i):(this.checkSurface(),this.$nativeGraphicsContext.quadraticCurveTo(e,t,n,i))},o.lineTo=function(e,t){egret_native.Canvas?this.$nativeContext.lineTo(e,t):(this.checkSurface(),this.$nativeGraphicsContext.lineTo(e,t))},o.fill=function(e){egret_native.Canvas?this.$nativeContext.fill(e):(this.checkSurface(),this.$nativeGraphicsContext.fill(e))},o.closePath=function(){egret_native.Canvas?(this.$nativeContext.closePath(),this.clipRectArray&&(this.$clipRectArray=this.clipRectArray,this.clipRectArray=null)):(this.checkSurface(),this.$nativeGraphicsContext.closePath())},o.rect=function(e,t,n,i){egret_native.Canvas?(this.$nativeContext.rect(e,t,n,i),this.$clipRectArray.push({x:e,y:t,w:n,h:i})):(this.checkSurface(),this.$nativeGraphicsContext.rect(e,t,n,i),this.$clipRect.setTo(e,t,n,i))},o.moveTo=function(e,t){egret_native.Canvas?this.$nativeContext.moveTo(e,t):(this.checkSurface(),this.$nativeGraphicsContext.moveTo(e,t))},o.fillRect=function(e,t,n,i){egret_native.Canvas?this.$nativeContext.fillRect(e,t,n,i):(this.checkSurface(),this.$nativeGraphicsContext.fillRect(e,t,n,i))},o.bezierCurveTo=function(e,t,n,i,r,a){egret_native.Canvas?this.$nativeContext.bezierCurveTo(e,t,n,i,r,a):(this.checkSurface(),this.$nativeGraphicsContext.bezierCurveTo(e,t,n,i,r,a))},o.stroke=function(){egret_native.Canvas?this.$nativeContext.stroke():(this.checkSurface(),this.$nativeGraphicsContext.stroke())},o.strokeRect=function(e,t,n,i){egret_native.Canvas?this.$nativeContext.strokeRect(e,t,n,i):(this.checkSurface(),this.$nativeGraphicsContext.strokeRect(e,t,n,i))},o.beginPath=function(){egret_native.Canvas?(this.$nativeContext.beginPath(),this.clipRectArray=this.$clipRectArray.concat()):(this.checkSurface(),this.$nativeGraphicsContext.beginPath())},o.arcTo=function(e,t,n,i,r){egret_native.Canvas?this.$nativeContext.arcTo(e,t,n,i,r):(this.checkSurface(),this.$nativeGraphicsContext.arcTo(e,t,n,i,r))},o.transform=function(e,t,n,i,r,a){this.$matrix.append(e,t,n,i,r,a),this.setTransformToNative()},o.translate=function(e,t){this.$matrix.translate(e,t),this.setTransformToNative()},o.scale=function(e,t){this.$matrix.scale(e,t),this.setTransformToNative()},o.rotate=function(e){this.$matrix.rotate(e),this.setTransformToNative()},o.restore=function(){if(egret_native.Canvas){if(this.$saveList.length){var e=this.$saveList.pop();for(var t in e)this[t]=e[t];this.setTransformToNative(),this.$nativeContext.restore(),this.clipRectArray=null}}else if(this.$saveCount>0){if(this.$saveList.length){var e=this.$saveList.pop();for(var t in e)this[t]=e[t];this.setTransformToNative()}var n=this.$clipList.indexOf(this.$saveCount);if(-1!=n){var i=this.$clipList.length;for(this.$clipList.splice(n,i-n);i>n;n++)this.checkSurface(),this.$nativeContext.popClip()}this.$saveCount--}},o.save=function(){var t=new e.Matrix;t.copyFrom(this.$matrix),egret_native.Canvas?(this.$saveList.push({lineWidth:this.$lineWidth,globalCompositeOperation:this.$globalCompositeOperation,globalAlpha:this.$globalAlpha,strokeStyle:this.$strokeStyle,fillStyle:this.$fillStyle,font:this.$font,$matrix:t,$clipRectArray:this.$clipRectArray.concat()}),this.$nativeContext.save()):(this.$saveList.push({lineWidth:this.$lineWidth,globalCompositeOperation:this.$globalCompositeOperation,globalAlpha:this.$globalAlpha,strokeStyle:this.$strokeStyle,fillStyle:this.$fillStyle,font:this.$font,$matrix:t}),this.$saveCount++)},o.clip=function(e){if(egret_native.Canvas){if(this.$clipRectArray.length>0){for(var t=[],n=0;n<this.$clipRectArray.length;n++){var i=this.$clipRectArray[n];t.push(i.x),t.push(i.y),t.push(i.w),t.push(i.h)}this.$nativeContext.pushRectStencils(t),this.$clipRectArray.length=0}}else this.$clipRect.width>0&&this.$clipRect.height>0&&(this.checkSurface(),this.$nativeContext.pushClip(this.$clipRect.x,this.$clipRect.y,this.$clipRect.width,this.$clipRect.height),this.$clipRect.setEmpty(),this.$clipList.push(this.$saveCount))},o.clearRect=function(e,t,n,i){egret_native.Canvas?this.$nativeContext.clearRect(e,t,n,i):(this.checkSurface(),this.$nativeContext.clearScreen(0,0,0))},o.setTransform=function(e,t,n,i,r,a){this.$matrix.setTo(e,t,n,i,r,a),this.setTransformToNative()},o.setTransformToNative=function(){var e=this.$matrix;egret_native.Canvas||this.checkSurface(),this.$nativeContext.setTransform(e.a,e.b,e.c,e.d,e.tx,e.ty)},o.createLinearGradient=function(e,t,n,i){return egret_native.Canvas?this.$nativeContext.createLinearGradient(e,t,n,i):(this.checkSurface(),this.$nativeGraphicsContext.createLinearGradient(e,t,n,i))},o.createRadialGradient=function(e,t,n,i,r,a){return egret_native.Canvas?this.$nativeContext.createRadialGradient(e,t,n,i,r,a):(this.checkSurface(),this.$nativeGraphicsContext.createRadialGradient(e,t,n,i,r,a))},o.fillText=function(t,n,i,r){var a=e.TextField.default_fontFamily;egret_native.Canvas?(this.$nativeContext.createLabel(a,this.$fontSize,"",this.$hasStrokeText?this.$lineWidth:0),this.$hasStrokeText=!1,this.$nativeContext.drawText(t,n,i)):(egret_native.Label.createLabel(a,this.$fontSize,"",this.$hasStrokeText?this.$lineWidth:0),this.$hasStrokeText=!1,egret_native.Label.drawText(t,n,i))},o.strokeText=function(e,t,n,i){this.$hasStrokeText=!0},o.measureText=function(t){var n=e.TextField.default_fontFamily;return egret_native.Label.createLabel(n,this.$fontSize,"",this.$hasStrokeText?this.$lineWidth:0),{width:egret_native.Label.getTextSize(t)[0]}},o.drawImage=function(e,t,n,i,r,a,s,o,h){var c;c=egret_native.Canvas?e.$nativeCanvas?e.$nativeCanvas:e:e.$nativeRenderTexture?e.$nativeRenderTexture:e,c&&(3==arguments.length?(a=t,s=n,t=0,n=0,i=o=e.width,r=h=e.height):5==arguments.length?(a=t,s=n,o=i,h=r,t=0,n=0,i=e.width,r=e.height):egret_native.Canvas?(i||(i=e.width),r||(r=e.height),a||(a=0),s||(s=0),o||(o=i),h||(h=r)):(void 0==i&&(i=e.width),void 0==r&&(r=e.height),void 0==a&&(a=0),void 0==s&&(s=0),void 0==o&&(o=i),void 0==h&&(h=r)),egret_native.Canvas||this.checkSurface(),this.$nativeContext.drawImage(c,t,n,i,r,a,s,o,h))},o.createPattern=function(e,t){return null},o.getImageData=function(e,n,i,r){var a;return egret_native.Canvas?(e!=Math.floor(e)&&(e=Math.floor(e),i++),n!=Math.floor(n)&&(n=Math.floor(n),r++),a=this.$nativeContext.getPixels(e,n,i,r)):(t.$currentSurface==this.surface&&null!=t.$currentSurface&&t.$currentSurface.end(),a=this.surface.getImageData(e,n,i,r)),a.pixelData&&(a.data=a.pixelData),a},o.checkSurface=function(){t.$currentSurface!=this.surface&&(null!=t.$currentSurface&&t.$currentSurface.end(),this.surface&&this.surface.begin())},r}(e.HashObject);t.NativeRenderContext=i,e.registerClass(i,"egret.native.NativeRenderContext",["egret.sys.RenderContext"])}(t=e["native"]||(e["native"]={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var n=function(e){function n(){e.call(this),this.renderContext=egret_native.Canvas?null:new t.NativeRenderContext,this.$widthReadySet=!1,this.$heightReadySet=!1,this.$isRoot=!1,this.$isDispose=!1,egret_native.Canvas&&this.init()}__extends(n,e);var i=__define,r=n,a=r.prototype;return a.init=function(){this.renderContext=new t.NativeRenderContext},a.toDataURL=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(egret_native.Canvas){if(this.$nativeCanvas)return this.$nativeCanvas.toDataURL.apply(this.$nativeCanvas,arguments)}else if(this.$nativeRenderTexture)return this.$nativeRenderTexture.toDataURL.apply(this.$nativeRenderTexture,arguments);return null},a.saveToFile=function(e,t){egret_native.Canvas?this.$nativeCanvas&&this.$nativeCanvas.saveToFile&&this.$nativeCanvas.saveToFile(e,t):this.$nativeRenderTexture&&this.$nativeRenderTexture.saveToFile&&this.$nativeRenderTexture.saveToFile(e,t)},i(a,"width",function(){return this.$width},function(e){if(egret_native.Canvas){if(e>0)if(this.$width=e,this.$nativeCanvas)this.$nativeCanvas.width=e;else{this.$nativeCanvas=new egret_native.Canvas(e,1),this.$isRoot&&egret_native.setScreenCanvas(this.$nativeCanvas);var t=this.$nativeCanvas.getContext("2d");t.clearScreen(0,0,0,0),this.renderContext.$nativeContext=t}}else{if(this.$width==e)return;this.$width=e,this.$isDispose||(this.$widthReadySet=!0,this.createRenderTexture())}}),i(a,"height",function(){return this.$height},function(e){if(egret_native.Canvas){if(e>0)if(this.$height=e,this.$nativeCanvas)this.$nativeCanvas.height=e;else{this.$nativeCanvas=new egret_native.Canvas(1,e),this.$isRoot&&egret_native.setScreenCanvas(this.$nativeCanvas);var t=this.$nativeCanvas.getContext("2d");t.clearScreen(0,0,0,0),this.renderContext.$nativeContext=t}}else{if(this.$height==e)return;this.$height=e,this.$isDispose||(this.$heightReadySet=!0,this.createRenderTexture())}}),a.getImageData=function(e,t,n,i){return e!=Math.floor(e)&&(e=Math.floor(e),n++),t!=Math.floor(t)&&(t=Math.floor(t),i++),this.$nativeRenderTexture.getPixels(e,t,n,i)},a.createRenderTexture=function(){this.$isRoot||(this.$nativeRenderTexture||this.$widthReadySet&&this.$heightReadySet)&&(this.$nativeRenderTexture&&this.$nativeRenderTexture.dispose(),this.$nativeRenderTexture=new egret_native.RenderTexture(this.$width,this.$height),this.renderContext.globalAlpha=1,this.renderContext.globalCompositeOperation="source-over",this.renderContext.setTransform(1,0,0,1,0,0),this.$widthReadySet=!1,this.$heightReadySet=!1)},a.begin=function(){this.$nativeRenderTexture&&(t.$currentSurface=this,this.$nativeRenderTexture.getIn?this.$nativeRenderTexture.getIn():this.$nativeRenderTexture.begin())},a.end=function(){this.$nativeRenderTexture&&(t.$currentSurface=null,this.$nativeRenderTexture.getOut?this.$nativeRenderTexture.getOut():this.$nativeRenderTexture.end())},a.setRootCanvas=function(){egret_native.setScreenCanvas(this.$nativeCanvas)},a.$dispose=function(){egret_native.Canvas?this.$isDispose=!0:(this.$nativeRenderTexture&&(t.$currentSurface==this&&t.$currentSurface.end(),this.$nativeRenderTexture.dispose(),this.$nativeRenderTexture=null),this.$isDispose=!0)},a.$reload=function(){this.$isDispose=!1},n}(e.HashObject);t.NativeSurface=n,e.registerClass(n,"egret.native.NativeSurface",["egret.sys.Surface","egret.BitmapData"])}(t=e["native"]||(e["native"]={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function n(t,n){var i=e.sys.surfaceFactory.create(!0);if(!i)return null;var r=t.$getTextureWidth(),a=t.$getTextureHeight();null==n&&(n=e.$TempRectangle,n.x=0,n.y=0,n.width=r,n.height=a),n.x=Math.min(n.x,r-1),n.y=Math.min(n.y,a-1),n.width=Math.min(n.width,r-n.x),n.height=Math.min(n.height,a-n.y);var s=n.width,o=n.height;i.width=s,i.height=o;var h=t,c=i.renderContext;c.imageSmoothingEnabled=!1;var u=Math.round(h._offsetX),l=Math.round(h._offsetY),v=h._bitmapWidth,d=h._bitmapHeight;return c.globalAlpha=1,c.globalCompositeOperation="source-over",c.setTransform(1,0,0,1,0,0),c.drawImage(h._bitmapData,h._bitmapX+n.x/e.$TextureScaleFactor,h._bitmapY+n.y/e.$TextureScaleFactor,v*n.width/r,d*n.height/a,u,l,n.width,n.height),i}function i(t,i){try{var r=n(this,i),a=r.toDataURL(t);return r.$dispose(),a}catch(s){return e.$error(1033),null}}function r(t,i,r){try{var a=n(this,r);a.saveToFile(t,i),a.$dispose()}catch(s){e.$error(1033)}}function a(t,n){return e.$error(1035),null}e.Texture.prototype.toDataURL=i,e.Texture.prototype.saveToFile=r,e.Texture.prototype.getPixel32=a}(t=e["native"]||(e["native"]={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var n=[],i=function(){function i(){e.sys.sharedRenderContext=this.create().renderContext,e.sys.hitTestRenderContext=this.create().renderContext}var r=(__define,i),a=r.prototype;return a.create=function(e){var i=e||n.length>3?n.pop():null;return i||(i=this.createSurface(new t.NativeSurface)),i.$reload(),i},a.release=function(e){e&&(e.$dispose(),e.width=e.height=1,n.push(e))},a.createSurface=function(e){var t=e.renderContext;return t.surface=e,e},i}();t.OpenGLFactory=i,e.registerClass(i,"egret.native.OpenGLFactory",["egret.sys.SurfaceFactory"])}(t=e["native"]||(e["native"]={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var n=function(n){function i(){n.call(this),this.init(i.option)}__extends(i,n);var r=(__define,i),a=r.prototype;return a.init=function(n){n.showPaintRect=!1;var i=new e.Stage;i.$screen=this,i.$scaleMode=n.scaleMode,i.$maxTouches=n.maxTouches,i.textureScaleFactor=n.textureScaleFactor,i.frameRate=n.frameRate,egret_native.Canvas||i.addEventListener(e.Event.ENTER_FRAME,function(){t.$currentSurface&&t.$currentSurface.end()},this);var r=e.sys.surfaceFactory.create();r.$isRoot=!0;var a=new t.NativeTouchHandler(i),s=new e.sys.Player(r.renderContext,i,n.entryClassName);if(new t.NativeHideHandler(i),s.showPaintRect(n.showPaintRect),n.showFPS||n.showLog){for(var o=n.fpsStyles||"",h=o.split(","),c={},u=0;u<h.length;u++){var l=h[u].split(":");c[l[0]]=l[1]}n.fpsStyles=c,s.displayFPS(n.showFPS,n.showLog,n.logFilter,n.fpsStyles)}this.playerOption=n,this.$stage=i,this.player=s,this.nativeTouch=a,this.updateScreenSize(),this.updateMaxTouches(),s.start()},a.updateScreenSize=function(){var t=this.playerOption,n=egret_native.EGTView.getFrameWidth(),i=egret_native.EGTView.getFrameHeight(),r=e.sys.screenAdapter.calculateStageSize(this.$stage.$scaleMode,n,i,t.contentWidth,t.contentHeight),a=r.stageWidth,s=r.stageHeight,o=r.displayWidth,h=r.displayHeight,c=(i-h)/2,u=(n-o)/2;egret_native.EGTView.setVisibleRect(u,c,o,h),egret_native.EGTView.setDesignSize(a,s),this.player.updateStageSize(a,s)},a.setContentSize=function(e,t){var n=this.playerOption;n.contentWidth=e,n.contentHeight=t,this.updateScreenSize()},a.updateMaxTouches=function(){this.nativeTouch.$updateMaxTouches()},i}(e.HashObject);t.NativePlayer=n,e.registerClass(n,"egret.native.NativePlayer",["egret.sys.Screen"])}(t=e["native"]||(e["native"]={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function n(){if(!a){a=!0;try{e.Capabilities.$setNativeCapabilities(egret_native.getVersion())}catch(n){}var i=e.sys.$ticker,r=function(){i.update()};egret_native.executeMainLoop(r,i),e.sys.surfaceFactory=new t.OpenGLFactory,e.sys.screenAdapter||(e.sys.screenAdapter=new e.sys.ScreenAdapter);var o=new t.NativePlayer;s.push(o),t.$supportCanvas||(o.$stage.dirtyRegionPolicy=e.DirtyRegionPolicy.OFF,e.sys.DisplayList.prototype.setDirtyRegionPolicy=function(){})}}function i(){for(var e=s.length,t=0;e>t;t++)s[t].updateScreenSize()}function r(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}t.$supportCanvas=egret_native.Canvas?!0:!1;var a=!1,s=[];e.warn=function(){console.warn.apply(console,r(arguments))},e.error=function(){console.error.apply(console,r(arguments))},e.assert=function(){console.assert.apply(console,r(arguments))},e.log=function(){console.log.apply(console,r(arguments))},e.runEgret=n,e.updateAllScreens=i}(t=e["native"]||(e["native"]={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function n(e){return egret_native.getOption(e)}t.getOption=n,e.getOption=n}(t=e["native"]||(e["native"]={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function n(t){var n=JSON.parse(t),r=n.functionName,a=i[r];if(a){var s=n.value;a.call(null,s)}else e.$warn(1004,r)}var i={},r=function(){function e(){}var t=(__define,e);t.prototype;return e.call=function(e,t){var n={};n.functionName=e,n.value=t,egret_native.sendInfoToPlugin(JSON.stringify(n))},e.addCallback=function(e,t){i[e]=t},e}();t.NativeExternalInterface=r,e.registerClass(r,"egret.native.NativeExternalInterface",["egret.ExternalInterface"]),e.ExternalInterface=r,egret_native.receivedPluginInfo=n}(t=e["native"]||(e["native"]={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var n=function(n){function i(){n.call(this),this.loaded=!1}__extends(i,n);var r=__define,a=i,s=a.prototype;return r(s,"length",function(){if(this.originAudio)return this.originAudio.duration;throw new Error("sound not loaded!")}),s.load=function(t){function n(){var n=e.PromiseObject.create();n.onSuccessFunc=r,n.onErrorFunc=s,egret_native.download(t,t,n)}function r(){c.load(),i.$recycle(t,c)}function a(){o(),h.loaded=!0,h.dispatchEventWith(e.Event.COMPLETE)}function s(){o(),h.dispatchEventWith(e.IOErrorEvent.IO_ERROR)}function o(){c.removeEventListener("canplaythrough",a),c.removeEventListener("error",s)}var h=this;this.url=t;var c=new Audio(t);c.addEventListener("canplaythrough",a),c.addEventListener("error",s),this.originAudio=c,egret_native.isFileExists(t)?r():n()},s.play=function(n,r){n=+n||0,r=+r||0;var a=i.$pop(this.url);null==a&&(a=new Audio(this.url)),a.autoplay=!0;var s=new t.NativeSoundChannel(a);return s.$url=this.url,s.$loops=r,s.$startTime=n,s.$play(),e.sys.$pushSoundChannel(s),s},s.close=function(){0==this.loaded&&this.originAudio&&(this.originAudio.src=""),this.originAudio&&(this.originAudio=null),i.$clear(this.url)},i.$clear=function(e){var t=i.audios[e];t&&(t.length=0)},i.$pop=function(e){var t=i.audios[e];return t&&t.length>0?t.pop():null},i.$recycle=function(e,t){var n=i.audios[e];null==i.audios[e]&&(n=i.audios[e]=[]),n.push(t)},i.MUSIC="music",i.EFFECT="effect",i.audios={},i}(e.EventDispatcher);t.NativeSound=n,e.registerClass(n,"egret.native.NativeSound",["egret.Sound"]),__global.Audio&&(e.Sound=n)}(t=e["native"]||(e["native"]={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var n=function(n){function i(t){var i=this;n.call(this),this.$startTime=0,this.audio=null,this.isStopped=!1,this.onPlayEnd=function(){return 1==i.$loops?(i.stop(),void i.dispatchEventWith(e.Event.SOUND_COMPLETE)):(i.$loops>0&&i.$loops--,void i.$play())},t.addEventListener("ended",this.onPlayEnd),this.audio=t}__extends(i,n);var r=__define,a=i,s=a.prototype;return s.$play=function(){if(this.isStopped)return void e.$error(1036);try{this.audio.currentTime=this.$startTime}catch(t){}finally{this.audio.play()}},s.stop=function(){if(this.audio){this.isStopped||e.sys.$popSoundChannel(this),this.isStopped=!0;var n=this.audio;n.pause(),n.removeEventListener("ended",this.onPlayEnd),this.audio=null,t.NativeSound.$recycle(this.$url,n)}},r(s,"volume",function(){return this.audio?this.audio.volume:1},function(t){return this.isStopped?void e.$error(1036):void(this.audio&&(this.audio.volume=t))}),r(s,"position",function(){return this.audio?this.audio.currentTime:0}),i}(e.EventDispatcher);t.NativeSoundChannel=n,e.registerClass(n,"egret.native.NativeSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(t=e["native"]||(e["native"]={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var n=function(n){function i(){n.call(this),this.loaded=!1}__extends(i,n);var r=__define,a=i,s=a.prototype;return r(s,"length",function(){throw new Error("sound length not supported")}),s.load=function(t){function n(){var n=e.PromiseObject.create();n.onSuccessFunc=i,n.onErrorFunc=function(){e.IOErrorEvent.dispatchIOErrorEvent(r)},egret_native.download(t,t,n)}function i(){r.loaded=!0,r.preload()}var r=this;this.url=t,egret_native.isFileExists(t)?i():n()},s.preload=function(){var t=this;if(t.type==e.Sound.EFFECT){var n=new e.PromiseObject;n.onSuccessFunc=function(n){t.dispatchEventWith(e.Event.COMPLETE)},egret_native.Audio.preloadEffectAsync(t.url,n)}else t.dispatchEventWith(e.Event.COMPLETE)},s.play=function(n,i){n=+n||0,i=+i||0;var r=new t.NaSoundChannel;return r.$url=this.url,r.$loops=i,r.$type=this.type,r.$startTime=n,r.$play(),e.sys.$pushSoundChannel(r),r},s.close=function(){},i.MUSIC="music",i.EFFECT="effect",i}(e.EventDispatcher);t.NaSound=n,e.registerClass(n,"egret.native.NaSound",["egret.Sound"]),__global.Audio||(e.Sound=n)}(t=e["native"]||(e["native"]={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var n=function(t){function n(){t.call(this),this.$startTime=0,this.isStopped=!1,this._startTime=0}__extends(n,t);var i=__define,r=n,a=r.prototype;return a.$play=function(){this.isStopped=!1,this.$type==e.Sound.EFFECT?this._effectId=egret_native.Audio.playEffect(this.$url,1!=this.$loops):(n.currentPath=this.$url,egret_native.Audio.playBackgroundMusic(this.$url,1!=this.$loops)),this._startTime=Date.now()},a.stop=function(){this.isStopped||e.sys.$popSoundChannel(this),this.isStopped=!0,this.$type==e.Sound.EFFECT?this._effectId&&(egret_native.Audio.stopEffect(this._effectId),this._effectId=null):this.$url==n.currentPath&&egret_native.Audio.stopBackgroundMusic(!1)},i(a,"volume",function(){return this.$type==e.Sound.EFFECT?egret_native.Audio.getEffectsVolume():egret_native.Audio.getBackgroundMusicVolume()},function(t){this.$type==e.Sound.EFFECT?egret_native.Audio.setEffectsVolume(t):egret_native.Audio.setBackgroundMusicVolume(t)}),i(a,"position",function(){return(Date.now()-this._startTime)/1e3}),n}(e.EventDispatcher);t.NaSoundChannel=n,e.registerClass(n,"egret.native.NaSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(t=e["native"]||(e["native"]={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var n;!function(n){function i(e){return c[e]}function r(t,n){c[t]=n;try{return o(),!0}catch(i){return e.$warn(1018,t,n),!1}}function a(e){delete c[e],o()}function s(){for(var e in c)delete c[e];o()}function o(){egret_native.saveRecord(h,JSON.stringify(c))}var h="LocalStorage.local",c={};if(egret_native.isRecordExists(h)){var u=egret_native.loadRecord(h);try{c=JSON.parse(u)}catch(l){c={}}}else c={};t.getItem=i,t.setItem=r,t.removeItem=a,t.clear=s}(n=t["native"]||(t["native"]={}))}(t=e.localStorage||(e.localStorage={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var n=function(t){function n(n){t.call(this),egret_native.pauseApp=function(){n.dispatchEvent(new e.Event(e.Event.DEACTIVATE)),egret_native.Audio.pauseBackgroundMusic(),egret_native.Audio.pauseAllEffects()},egret_native.resumeApp=function(){n.dispatchEvent(new e.Event(e.Event.ACTIVATE)),egret_native.Audio.resumeBackgroundMusic(),egret_native.Audio.resumeAllEffects()}}__extends(n,t);var i=(__define,n);i.prototype;return n}(e.HashObject);t.NativeHideHandler=n,e.registerClass(n,"egret.native.NativeHideHandler")}(t=e["native"]||(e["native"]={}))}(egret||(egret={}));var egret;!function(e){var t=function(t){function n(){t.apply(this,arguments),this._downCount=0,this._path=null,this._bytesTotal=0}__extends(n,t);var i=(__define,n),r=i.prototype;return r.load=function(e,t){this._downCount=0,this._path=e,this._bytesTotal=t,this.reload()},r.reload=function(){if(this._downCount>=3)return void this.downloadFileError();this._downCount++;var t=e.PromiseObject.create(),n=this;t.onSuccessFunc=function(){n.loadOver()},t.onErrorFunc=function(){n.reload()},t.downloadingSizeFunc=function(e){n.downloadingProgress(e)},egret_native.download(this._path,this._path,t)},r.downloadingProgress=function(t){e.ProgressEvent.dispatchProgressEvent(this,e.ProgressEvent.PROGRESS,t,this._bytesTotal)},r.downloadFileError=function(){this.dispatchEvent(new e.Event(e.IOErrorEvent.IO_ERROR))},r.loadOver=function(){this.dispatchEvent(new e.Event(e.Event.COMPLETE))},n}(e.EventDispatcher);e.NativeResourceLoader=t,e.registerClass(t,"egret.NativeResourceLoader")}(egret||(egret={}));var egret;!function(e){var t;!function(t){var n=function(t){function n(n){t.call(this),this.$touch=new e.sys.TouchHandler(n);var i=this;egret_native.onTouchesBegin=function(e,t,n,r){i.$executeTouchCallback(e,t,n,r,i.$touch.onTouchBegin)},egret_native.onTouchesMove=function(e,t,n,r){i.$executeTouchCallback(e,t,n,r,i.$touch.onTouchMove)},egret_native.onTouchesEnd=function(e,t,n,r){i.$executeTouchCallback(e,t,n,r,i.$touch.onTouchEnd)},egret_native.onTouchesCancel=function(e,t,n,i){}}__extends(n,t);var i=(__define,n),r=i.prototype;return r.$executeTouchCallback=function(e,t,n,i,r){for(var a=0;e>a;a++){var s=t[a],o=n[a],h=i[a];r.call(this.$touch,o,h,s)}},r.$updateMaxTouches=function(){this.$touch.$initMaxTouches()},n}(e.HashObject);t.NativeTouchHandler=n,e.registerClass(n,"egret.native.NativeTouchHandler")}(t=e["native"]||(e["native"]={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var n=function(t){function n(){t.call(this),this._url="",this._method="",this.urlData={},this.responseHeader=""}__extends(n,t);var i=__define,r=n,a=r.prototype;return i(a,"response",function(){return this._response}),i(a,"responseType",function(){return this._responseType},function(e){this._responseType=e}),i(a,"withCredentials",function(){return this._withCredentials},function(e){this._withCredentials=e}),a.open=function(e,t){void 0===t&&(t="GET"),this._url=e,this._method=t},a.send=function(t){function n(){var t=new e.PromiseObject;t.onSuccessFunc=function(t){r._response=t,e.Event.dispatchEvent(r,e.Event.COMPLETE)},t.onErrorFunc=function(){e.Event.dispatchEvent(r,e.IOErrorEvent.IO_ERROR)},r._responseType==e.HttpResponseType.ARRAY_BUFFER?egret_native.readFileAsync(r._url,t,"ArrayBuffer"):egret_native.readFileAsync(r._url,t)}function i(){var t=e.PromiseObject.create();t.onSuccessFunc=n,t.onErrorFunc=function(){e.Event.dispatchEvent(r,e.IOErrorEvent.IO_ERROR)},t.onResponseHeaderFunc=this.onResponseHeader,t.onResponseHeaderThisObject=this,egret_native.download(r._url,r._url,t)}var r=this;if(r.isNetUrl(r._url)){r.urlData.type=r._method,r._method==e.HttpMethod.POST&&t?r.urlData.data=t.toString():delete r.urlData.data,r._responseType==e.HttpResponseType.ARRAY_BUFFER?r.urlData.binary=!0:r.urlData.header=!1,this.headerObj?r.urlData.header=JSON.stringify(this.headerObj):delete r.urlData.header;var a=e.PromiseObject.create();a.onSuccessFunc=function(t){r._response=t,e.callLater(e.Event.dispatchEvent,e.Event,r,e.Event.COMPLETE)},a.onErrorFunc=function(t){e.$warn(1019,t),e.Event.dispatchEvent(r,e.IOErrorEvent.IO_ERROR)},a.onResponseHeaderFunc=this.onResponseHeader,a.onResponseHeaderThisObject=this,egret_native.requireHttp(r._url,r.urlData,a)}else egret_native.isFileExists(r._url)?n():i()},a.isNetUrl=function(e){return-1!=e.indexOf("http://")||-1!=e.indexOf("HTTP://")},a.abort=function(){},a.onResponseHeader=function(e){this.responseHeader="";var t=JSON.parse(e);for(var n in t)this.responseHeader+=n+": "+t[n]+"\r\n"},a.getAllResponseHeaders=function(){return this.responseHeader},a.setRequestHeader=function(e,t){this.headerObj||(this.headerObj={}),this.headerObj[e]=t},a.getResponseHeader=function(e){return""},n}(e.EventDispatcher);t.NativeHttpRequest=n,e.registerClass(n,"egret.native.NativeHttpRequest",["egret.HttpRequest"]),e.HttpRequest=n}(t=e["native"]||(e["native"]={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var n=function(t){function n(){t.apply(this,arguments),this.data=null,this._crossOrigin=null}__extends(n,t);var i=__define,r=n,a=r.prototype;return i(a,"crossOrigin",function(){return this._crossOrigin},function(e){this._crossOrigin=e}),a.load=function(e){this.check(e)},a.check=function(e){var t=this;t.isNetUrl(e)?t.download(e):egret_native.isFileExists(e)?t.loadTexture(e):t.download(e)},a.download=function(t){var n=this,i=e.PromiseObject.create();i.onSuccessFunc=function(){n.loadTexture(t)},i.onErrorFunc=function(){n.dispatchEventWith(e.IOErrorEvent.IO_ERROR)},egret_native.download(t,t,i)},a.loadTexture=function(t){var n=this,i=new e.PromiseObject;i.onSuccessFunc=function(t){n.data=e.$toBitmapData(t),n.dispatchEventWith(e.Event.COMPLETE)},i.onErrorFunc=function(){n.dispatchEventWith(e.IOErrorEvent.IO_ERROR)},egret_native.Texture.addTextureAsyn(t,i)},a.isNetUrl=function(e){return-1!=e.indexOf("http://")||-1!=e.indexOf("HTTP://")},n.crossOrigin=null,n}(e.EventDispatcher);t.NativeImageLoader=n,e.registerClass(n,"egret.native.NativeImageLoader",["egret.ImageLoader"]),e.ImageLoader=n}(t=e["native"]||(e["native"]={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var n=function(t){function n(){t.call(this),this.textValue="",this.colorValue=16777215,this.isFinishDown=!1,this.textValue=""}__extends(n,t);var i=(__define,n),r=i.prototype;return r.$getText=function(){return this.textValue||(this.textValue=""),this.textValue},r.$setText=function(e){return this.textValue=e,!0},r.$setColor=function(e){return this.colorValue=e,!0},r.$onBlur=function(){},r.showScreenKeyboard=function(){var t=this;t.dispatchEvent(new e.Event("focus")),e.Event.dispatchEvent(t,"focus",!1,{showing:!0}),egret_native.EGT_TextInput=function(n){t.$textfield.multiline?(t.textValue=n,t.dispatchEvent(new e.Event("updateText")),t.isFinishDown&&(t.isFinishDown=!1,t.dispatchEvent(new e.Event("blur")))):(t.textValue=n.replace(/[\n|\r]/,""),egret_native.TextInputOp.setKeybordOpen(!1),t.dispatchEvent(new e.Event("updateText")),t.dispatchEvent(new e.Event("blur")))},egret_native.EGT_keyboardFinish=function(){t.$textfield.multiline&&(t.isFinishDown=!0)}},r.$show=function(){var e=this;egret_native.TextInputOp.setKeybordOpen(!1),egret_native.EGT_getTextEditerContentText=function(){return e.$getText()},egret_native.EGT_keyboardDidShow=function(){e.showScreenKeyboard(),egret_native.EGT_keyboardDidShow=function(){}},egret_native.EGT_keyboardDidHide=function(){},egret_native.EGT_deleteBackward=function(){};var t=this.$textfield,n=t.multiline?0:6,i=-1,r=1,a=t.maxChars<=0?-1:t.maxChars;
egret_native.TextInputOp.setKeybordOpen(!0,JSON.stringify({inputMode:n,inputFlag:i,returnType:r,maxLength:a}))},r.$hide=function(){this.dispatchEvent(new e.Event("blur")),egret_native.TextInputOp.setKeybordOpen(!1)},r.$resetStageText=function(){},r.$addToStage=function(){},r.$removeFromStage=function(){},r.$setTextField=function(e){return this.$textfield=e,!0},n}(e.EventDispatcher);t.NativeStageText=n,e.registerClass(n,"egret.native.NativeStageText",["egret.StageText"]),e.StageText=n}(t=e["native"]||(e["native"]={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function n(e){var t=egret_native.xmlStr2JsonStr(e),n=JSON.parse(t);return i(n,null)}function i(e,t){if("parsererror"==e.localName)throw new Error(e.textContent);var n=new a(e.localName,t,e.prefix,e.namespace,e.name),r=e.attributes,o=n.attributes;for(var h in r)o[h]=r[h];for(var c=e.children,u=c.length,l=n.children,v=0;u>v;v++){var d=c[v],f=d.nodeType,p=null;if(1==f)p=i(d,n);else if(3==f){var g=d.text.trim();g&&(p=new s(g,n))}p&&l.push(p)}return n}var r=function(){function e(e,t){this.nodeType=e,this.parent=t}var t=(__define,e);t.prototype;return e}();t.XMLNode=r,e.registerClass(r,"egret.web.XMLNode");var a=function(e){function t(t,n,i,r,a){e.call(this,1,n),this.attributes={},this.children=[],this.localName=t,this.prefix=i,this.namespace=r,this.name=a}__extends(t,e);var n=(__define,t);n.prototype;return t}(r);t.XML=a,e.registerClass(a,"egret.web.XML");var s=function(e){function t(t,n){e.call(this,3,n),this.text=t}__extends(t,e);var n=(__define,t);n.prototype;return t}(r);t.XMLText=s,e.registerClass(s,"egret.web.XMLText"),e.XML={parse:n}}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){}(t=e["native"]||(e["native"]={}))}(egret||(egret={}));