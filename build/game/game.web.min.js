var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},__define=this.__define||function(e,t,n,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:n,set:r})},egret;!function(e){var t;!function(t){var n=function(t){function n(){t.call(this)}__extends(n,t);var r=n;return p=r.prototype,p.proceed=function(t){function n(e){t.dispatchEvent(e)}function r(e){o(),t.dispatchEvent(e)}function a(){switch(o(),t.dataFormat){case e.URLLoaderDataFormat.VARIABLES:t.data=new e.URLVariables(d.response);break;default:t.data=d.response}window.setTimeout(function(){e.Event.dispatchEvent(t,e.Event.COMPLETE)},0)}function o(){d.removeEventListener(e.Event.COMPLETE,a,s),d.removeEventListener(e.IOErrorEvent.IO_ERROR,r,s),d.removeEventListener(e.ProgressEvent.PROGRESS,n,s)}var s=this;if(t.dataFormat==e.URLLoaderDataFormat.TEXTURE)return void this.loadTexture(t);if(t.dataFormat==e.URLLoaderDataFormat.SOUND)return void this.loadSound(t);var i=t._request,E=s.getVirtualUrl(e.$getUrl(i)),d=new e.HttpRequest;if(d.addEventListener(e.Event.COMPLETE,a,this),d.addEventListener(e.IOErrorEvent.IO_ERROR,r,this),d.addEventListener(e.ProgressEvent.PROGRESS,n,this),d.open(E,i.method),d.responseType=this.getResponseType(t.dataFormat),i.method!=e.URLRequestMethod.GET&&i.data)if(i.data instanceof e.URLVariables){d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var v=i.data;d.send(v.toString())}else d.setRequestHeader("Content-Type","multipart/form-data"),d.send(i.data);else d.send()},p.getResponseType=function(t){switch(t){case e.URLLoaderDataFormat.TEXT:case e.URLLoaderDataFormat.VARIABLES:return e.URLLoaderDataFormat.TEXT;case e.URLLoaderDataFormat.BINARY:return"arraybuffer";default:return t}},p.loadSound=function(t){function n(e){t.dispatchEvent(e)}function r(e){o(),t.dispatchEvent(e)}function a(){o(),t.data=i,window.setTimeout(function(){t.dispatchEventWith(e.Event.COMPLETE)},self)}function o(){i.removeEventListener(e.Event.COMPLETE,a,self),i.removeEventListener(e.IOErrorEvent.IO_ERROR,r,self),i.removeEventListener(e.ProgressEvent.PROGRESS,n,self)}var s=this.getVirtualUrl(t._request.url),i=new e.Sound;i.addEventListener(e.Event.COMPLETE,a,self),i.addEventListener(e.IOErrorEvent.IO_ERROR,r,self),i.addEventListener(e.ProgressEvent.PROGRESS,n,self),i.load(s)},p.loadTexture=function(t){function n(e){t.dispatchEvent(e)}function r(e){o(),t.dispatchEvent(e)}function a(){o();var n=E.data;n.setAttribute("bitmapSrc",i);var r=new e.Texture;r._setBitmapData(n),t.data=r,window.setTimeout(function(){t.dispatchEventWith(e.Event.COMPLETE)},s)}function o(){E.removeEventListener(e.Event.COMPLETE,a,s),E.removeEventListener(e.IOErrorEvent.IO_ERROR,r,s),E.removeEventListener(e.ProgressEvent.PROGRESS,n,s)}var s=this,i=this.getVirtualUrl(t._request.url),E=new e.ImageLoader;E.addEventListener(e.Event.COMPLETE,a,s),E.addEventListener(e.IOErrorEvent.IO_ERROR,r,s),E.addEventListener(e.ProgressEvent.PROGRESS,n,s),E.load(i)},p.getChangeList=function(){return[]},p.getVirtualUrl=function(e){return e},n.getNetContext=function(){return null==n._instance&&(n._instance=new n),n._instance},n}(e.HashObject);t.HTML5NetContext=n,e.registerClass(n,"egret.web.HTML5NetContext",["egret.NetContext"]),e.NetContext=n}(t=e.web||(e.web={}))}(egret||(egret={}));